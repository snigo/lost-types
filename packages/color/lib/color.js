"use strict";function e(e){if(e=+e,Number.isNaN(e))return NaN;e=e.toString();const t=/^[+-]?\d+(?:\.(\d+))?e([+-]?\d+)$/,s=/^[+-]?\d+(?:\.(\d+))?$/,r=/^[+-]?\d+?(0+)$/;if(r.test(e)){const t=e.match(r)[1];return t?-t.length:0}if(s.test(e)){const t=e.match(s)[1];return t?t.length:0}if(t.test(e)){const[,s="",r=0]=e.match(t);return s.length-r}return 0}function t(t,s,r=0){const i=Math.max(e(t),e(s),e(r));return+Math.abs(t-s).toFixed(i)<=r}function s(e,t){return(+e%+t+ +t)%+t}function r(e,t=12){return+(+(e*10**t).toFixed(0)*10**-t).toFixed(t<0?0:t)}function i(e,t=12){return null==e||Array.isArray(e)?NaN:(e=e.toString(),e=/%$/.test(e)?+e.slice(0,-1)/100:+e,void 0!==t&&(e=r(e,t)),e)}function n(){if(this.length>4294967295)throw RangeError("Cannot iterate infinite size range")}function a(e=1){if(e=+e,Number.isNaN(e)&&(e=1),e<=0)throw TypeError("Step cannot be 0 or negative number");return e}class Range{constructor(e,t,s=1){const r=arguments.length>1?+e:0,i=arguments.length>1?+t:+e;Number.isNaN(r)||Number.isNaN(i)||!arguments.length||(s=a(s),Object.defineProperties(this,{from:{value:r},to:{value:i},step:{value:s}}))}*[Symbol.iterator](){n.call(this);const t=this.from<=this.to,s=Math.max(e(this.step),e(this.from),e(this.to));for(let e=this.from;t?e<=this.to:e>=this.to;e=+(t?e+this.step:e-this.step).toFixed(s))yield e}static from(e){if(null==e)return new Range;if("function"!=typeof e[Symbol.iterator])return new Range;if(void 0!==e.length&&!e.length)return new Range;if(void 0!==e.size&&!e.size)return new Range;const t=Math.min(...e),s=Math.max(...e);return new Range(t,s)}forEach(t,s=this.step){n.call(this),s=a(s);const r=this.from<=this.to,i=Math.max(e(s),e(this.from),e(this.to));let o=0;for(let e=this.from;r?e<=this.to:e>=this.to;e=+(r?e+s:e-s).toFixed(i))t(e,o,this),o+=1}forEachReverse(t,s=this.step){n.call(this),s=a(s);const r=this.from<=this.to,i=Math.max(e(s),e(this.from),e(this.to));let o=0;for(let e=this.to;r?e>=this.from:e<=this.from;e=+(r?e-s:e+s).toFixed(i))t(e,o,this),o+=1}get length(){return void 0===this.to||void 0===this.from?0:Math.round(Math.abs(this.to-this.from)/this.step)+1}get max(){return this.from<=this.to?this.to:this.from}get min(){return this.from<=this.to?this.from:this.to}get center(){if(void 0!==this.to&&void 0!==this.from)return this.min+(this.max-this.min)/2}has(e){return+e>=this.min&&+e<=this.max}clamp(e){return+e<this.min?this.min:+e>this.max?this.max:+e}toArray(){return[...this]}getFraction(e,t=12){return Number.isNaN(+t)||+t<0?NaN:(t>100&&(t=100),+((+e-this.min)/(this.max-this.min)).toFixed(t))}fromFraction(e,t=12){return+(this.min+ +e*(this.max-this.min)).toFixed(t)}slice(e){if(!e)return[];const t=+((this.max-this.min+this.step)/e).toFixed(12),s=[];return this.forEach(e=>s.push(e),t),s}mod(e){return this.min+s(+e,this.max-this.min+1)}}const o=new Range(255),l=new Range(359),h=new Range(1);function u([e,t,s,i]){const n=e/255,a=t/255,o=s/255,u=Math.min(n,a,o),f=Math.max(n,a,o),c=f-u;let d=0,g=0,m=0;return d=0===c?0:f===n?(a-o)/c:f===a?(o-n)/c+2:(n-a)/c+4,d=l.mod(r(60*d,0)),m=(f+u)/2,g=m>0&&m<=.5?c/(2*m):c/(2-2*m||m),m=h.clamp(r(m,2)),g=h.clamp(r(g,2)),[e,t,s,d,g,m,i]}function f(e){return null==e?1:h.clamp(i(e,4))}function c(e){if("number"==typeof e)return l.mod(r(e,0));if("string"!=typeof e)return NaN;const t=(e=e.trim().toLowerCase()).match(/^([+\-0-9e.]+)(turn|g?rad|deg)?$/);if(!t)return NaN;switch(t[1]=r(t[1]),t[2]=t[2]||"deg",t[2]){case"turn":return r(l.mod(360*parseFloat(t[1])),0);case"rad":return r(l.mod(parseFloat(t[1])*(180/Math.PI)),0);case"grad":return r(l.mod(.9*parseFloat(t[1])),0);case"deg":return r(l.mod(parseFloat(t[1])),0);default:return NaN}}function d(e){return"number"==typeof e?h.clamp(r(e,2)):/%$/.test(e)?h.clamp(i(e,2)):NaN}function g(e){return"number"==typeof e?o.clamp(r(e,0)):"string"!=typeof e?NaN:o.clamp(/%$/.test(e)?o.fromFraction(i(e),0):r(e,0))}function m(...e){return e.every(e=>e||!e&&0==e)}function p(e,t){return(t.exec(e)||[]).filter((e,t)=>t&&!!e)}function b(e){return Array.isArray(e)?!e.length||e.length>4?[]:(e[0]=g(e[0]),e[1]=g(e[1]),e[2]=g(e[2]),e[3]=f(e[3]),e.some(e=>Number.isNaN(e))?[]:u(e)):[]}function y(e){return Array.isArray(e)?!e.length||e.length>4?[]:(e[0]=c(e[0]),e[1]=d(e[1]),e[2]=d(e[2]),e[3]=f(e[3]),e.some(e=>Number.isNaN(e))?[]:function([e,t,s,i]){const n=(1-Math.abs(2*s-1))*t,a=n*(1-Math.abs(e/60%2-1)),l=s-n/2;let h=0,u=0,f=0;return e>=0&&e<60?(h=n,u=a,f=0):e>=60&&e<120?(h=a,u=n,f=0):e>=120&&e<180?(h=0,u=n,f=a):e>=180&&e<240?(h=0,u=a,f=n):e>=240&&e<300?(h=a,u=0,f=n):e>=300&&e<360&&(h=n,u=0,f=a),h=o.clamp(r(255*(h+l),0)),u=o.clamp(r(255*(u+l),0)),f=o.clamp(r(255*(f+l),0)),[h,u,f,e,t,s,i]}(e)):[]}function w(e){if("object"!=typeof e)return[];if(m(e.red,e.green,e.blue,e.hue,e.saturation,e.lightness)){const t=[g(e.red),g(e.green),g(e.blue),c(e.hue),d(e.saturation),d(e.lightness),f(e.alpha)];return t.some(e=>Number.isNaN(e))?[]:t}return m(e.red,e.green,e.blue)?b([e.red,e.green,e.blue,e.alpha]):m(e.hue,e.saturation,e.lightness)?y([e.hue,e.saturation,e.lightness,e.alpha]):[]}class Entry{constructor(e,t,...s){this.key=e,this.value=t,this.aliases=new Set(s.filter(s=>s!==e||s!==t))}values(){return void 0!==this.key||void 0!==this.value||this.aliases.size?[this.key,this.value,...this.aliases]:[]}}const v=new WeakMap,k={strict:!0,immutable:!0},N=function(e){const t=Map.prototype.get.call(this,e);if(t)return e===t.key||e===t.value?this.delete(e):this.deleteAlias(t.key,e)},x=function(e){v.get(this).entryCount+=e},$=function(...e){if(e.some(e=>null==e)){if(!this.getOwnDescriptor().strict)return!1;throw TypeError("AliasMap entry cannot be null or undefined")}return!0},E=function(...e){if(this.getOwnDescriptor().immutable&&e.some(e=>this.has(e))){if(!this.getOwnDescriptor().strict)return!1;throw TypeError("Cannot reassign immutable entry. Delete entry first or set immutable property to false: .setOwnDescriptor({ immutable: false }).")}return!0},M=function(e,t,...s){if(s.some(s=>s===e||s===t)&&this.getOwnDescriptor().strict)throw TypeError("Key or value cannot be alias for itself")};class AliasMap extends Map{constructor(e=k){super();const t={entryCount:0,...k};Object.entries(e).forEach(([e,s])=>{t[e]=s}),v.set(this,t)}get entryCount(){return v.get(this).entryCount}get[Symbol.toStringTag](){return"AliasMap"}getOwnDescriptor(){const{strict:e,immutable:t}=v.get(this);return{strict:e,immutable:t}}getEntry(e){return super.get(e)}get(e){const t=this.getEntry(e);if(t)return t.value===e?t.key:t.value}getPrimaryKey(e){const t=this.getEntry(e);return t?t.key:t}getAliases(e){const t=this.getEntry(e);if(t&&"aliases"in t)return[...t.aliases]}getValue(e){const t=this.getEntry(e);return t?t.value:t}hasAlias(e,t){const s=this.getEntry(e);return!!s&&s.aliases.has(t)}delete(e){const t=this.getEntry(e);return!!t&&(super.delete(t.key),super.delete(t.value),t.aliases.forEach(e=>{super.delete(e)}),x.call(this,-1),!0)}deleteAlias(e,t){const s=this.getEntry(e);return!!s&&s.aliases.has(t)&&super.delete(t)&&s.aliases.delete(t)}set(e,t,...s){if(!$.call(this,e,t,...s))return!1;const r=this.getEntry(e);if(r&&r.key===e&&r.value===t)return this.setAlias(e,...s);if(!E.call(this,e,t,...s))return!1;M.call(this,e,t,...s),r&&r.key===e&&(s=[...r.aliases,...s]);const i=new Entry(e,t,...s);return i.values().forEach(e=>{N.call(this,e),super.set(e,i)}),x.call(this,1),this}setAlias(e,...t){if(!$.call(this,...t))return!1;if(!E.call(this,...t))return!1;const s=this.getEntry(e);return!(!s||!t.length)&&(M.call(this,s.key,s.value,...t),t.forEach(e=>{s.aliases.has(e)||(N.call(this,e),s.aliases.add(e),super.set(e,s))}),[...s.aliases])}setOwnDescriptor(e){const t=this.getOwnDescriptor();"strict"in e&&"boolean"==typeof e.strict&&(t.strict=e.strict),"immutable"in e&&"boolean"==typeof e.immutable&&(t.immutable=e.immutable);const s={...v.get(this),...t};return v.set(this,s),t}clear(){return x.call(this,-this.entryCount),super.clear()}entries(){return[...new Set([...super.values()])]}keys(){return this.entries().map(e=>e.key)}values(){return this.entries().map(e=>e.value)}forEach(e,t){return this.entries().forEach(e,t)}}const C=new AliasMap;function S(e){return"string"!=typeof e?[]:C.get(e.trim().toLowerCase())||[]}C.set("aliceblue",[240,248,255,208,1,.97,1],"#f0f8ff"),C.set("antiquewhite",[250,235,215,34,.78,.91,1],"#faebd7"),C.set("cyan",[0,255,255,180,1,.5,1],"#00ffff","aqua","#0ff"),C.set("aquamarine",[127,255,212,160,1,.75,1],"#7fffd4"),C.set("azure",[240,255,255,180,1,.97,1],"#f0ffff"),C.set("beige",[245,245,220,60,.56,.91,1],"#f5f5dc"),C.set("bisque",[255,228,196,33,1,.88,1],"#ffe4c4"),C.set("black",[0,0,0,0,0,0,1],"#000000","#000"),C.set("blanchedalmond",[255,235,205,36,1,.9,1],"#ffebcd"),C.set("blue",[0,0,255,240,1,.5,1],"#0000ff","#00f"),C.set("blueviolet",[138,43,226,271,.76,.53,1],"#8a2be2"),C.set("brown",[165,42,42,0,.59,.41,1],"#a52a2a"),C.set("burlywood",[222,184,135,34,.57,.7,1],"#deb887"),C.set("cadetblue",[95,158,160,182,.25,.5,1],"#5f9ea0"),C.set("chartreuse",[127,255,0,90,1,.5,1],"#7fff00"),C.set("chocolate",[210,105,30,25,.75,.47,1],"#d2691e"),C.set("coral",[255,127,80,16,1,.66,1],"#ff7f50"),C.set("cornflowerblue",[100,149,237,219,.79,.66,1],"#6495ed"),C.set("cornsilk",[255,248,220,48,1,.93,1],"#fff8dc"),C.set("crimson",[220,20,60,348,.83,.47,1],"#dc143c"),C.set("darkblue",[0,0,139,240,1,.27,1],"#00008b"),C.set("darkcyan",[0,139,139,180,1,.27,1],"#008b8b"),C.set("darkgoldenrod",[184,134,11,43,.89,.38,1],"#b8860b"),C.set("darkgray",[169,169,169,0,0,.66,1],"#a9a9a9","darkgrey"),C.set("darkgreen",[0,100,0,120,1,.2,1],"#006400"),C.set("darkkhaki",[189,183,107,56,.38,.58,1],"#bdb76b"),C.set("darkmagenta",[139,0,139,300,1,.27,1],"#8b008b"),C.set("darkolivegreen",[85,107,47,82,.39,.3,1],"#556b2f"),C.set("darkorange",[255,140,0,33,1,.5,1],"#ff8c00"),C.set("darkorchid",[153,50,204,280,.61,.5,1],"#9932cc"),C.set("darkred",[139,0,0,0,1,.27,1],"#8b0000"),C.set("darksalmon",[233,150,122,15,.72,.7,1],"#e9967a"),C.set("darkseagreen",[143,188,143,120,.25,.65,1],"#8fbc8f"),C.set("darkslateblue",[72,61,139,248,.39,.39,1],"#483d8b"),C.set("darkslategray",[47,79,79,180,.25,.25,1],"#2f4f4f","darkslategrey"),C.set("darkturquoise",[0,206,209,181,1,.41,1],"#00ced1"),C.set("darkviolet",[148,0,211,282,1,.41,1],"#9400d3"),C.set("deeppink",[255,20,147,328,1,.54,1],"#ff1493"),C.set("deepskyblue",[0,191,255,195,1,.5,1],"#00bfff"),C.set("dimgray",[105,105,105,0,0,.41,1],"#696969","dimgrey"),C.set("dodgerblue",[30,144,255,210,1,.56,1],"#1e90ff"),C.set("firebrick",[178,34,34,0,.68,.42,1],"#b22222"),C.set("floralwhite",[255,250,240,40,1,.97,1],"#fffaf0"),C.set("forestgreen",[34,139,34,120,.61,.34,1],"#228b22"),C.set("gainsboro",[220,220,220,0,0,.86,1],"#dcdcdc"),C.set("ghostwhite",[248,248,255,240,1,.99,1],"#f8f8ff"),C.set("gold",[255,215,0,51,1,.5,1],"#ffd700"),C.set("goldenrod",[218,165,32,43,.74,.49,1],"#daa520"),C.set("gray",[128,128,128,0,0,.5,1],"#808080","grey"),C.set("green",[0,128,0,120,1,.25,1],"#008000"),C.set("greenyellow",[173,255,47,84,1,.59,1],"#adff2f"),C.set("honeydew",[240,255,240,120,1,.97,1],"#f0fff0"),C.set("hotpink",[255,105,180,330,1,.71,1],"#ff69b4"),C.set("indianred",[205,92,92,0,.53,.58,1],"#cd5c5c"),C.set("indigo",[75,0,130,275,1,.25,1],"#4b0082"),C.set("ivory",[255,255,240,60,1,.97,1],"#fffff0"),C.set("khaki",[240,230,140,54,.77,.75,1],"#f0e68c"),C.set("lavender",[230,230,250,240,.67,.94,1],"#e6e6fa"),C.set("lavenderblush",[255,240,245,340,1,.97,1],"#fff0f5"),C.set("lawngreen",[124,252,0,90,1,.49,1],"#7cfc00"),C.set("lemonchiffon",[255,250,205,54,1,.9,1],"#fffacd"),C.set("lightblue",[173,216,230,195,.53,.79,1],"#add8e6"),C.set("lightcoral",[240,128,128,0,.79,.72,1],"#f08080"),C.set("lightcyan",[224,255,255,180,1,.94,1],"#e0ffff"),C.set("lightgoldenrodyellow",[250,250,210,60,.8,.9,1],"#fafad2"),C.set("lightgray",[211,211,211,0,0,.83,1],"#d3d3d3","lightgrey"),C.set("lightgreen",[144,238,144,120,.73,.75,1],"#90ee90"),C.set("lightpink",[255,182,193,351,1,.86,1],"#ffb6c1"),C.set("lightsalmon",[255,160,122,17,1,.74,1],"#ffa07a"),C.set("lightseagreen",[32,178,170,177,.7,.41,1],"#20b2aa"),C.set("lightskyblue",[135,206,250,203,.92,.75,1],"#87cefa"),C.set("lightslategray",[119,136,153,210,.14,.53,1],"#778899","lightslategrey","#789"),C.set("lightsteelblue",[176,196,222,214,.41,.78,1],"#b0c4de"),C.set("lightyellow",[255,255,224,60,1,.94,1],"#ffffe0"),C.set("lime",[0,255,0,120,1,.5,1],"#00ff00","#0f0"),C.set("limegreen",[50,205,50,120,.61,.5,1],"#32cd32"),C.set("linen",[250,240,230,30,.67,.94,1],"#faf0e6"),C.set("magenta",[255,0,255,300,1,.5,1],"#ff00ff","fuchsia","#f0f"),C.set("maroon",[128,0,0,0,1,.25,1],"#800000"),C.set("mediumaquamarine",[102,205,170,160,.51,.6,1],"#66cdaa"),C.set("mediumblue",[0,0,205,240,1,.4,1],"#0000cd"),C.set("mediumorchid",[186,85,211,288,.59,.58,1],"#ba55d3"),C.set("mediumpurple",[147,112,219,260,.6,.65,1],"#9370db"),C.set("mediumseagreen",[60,179,113,147,.5,.47,1],"#3cb371"),C.set("mediumslateblue",[123,104,238,249,.8,.67,1],"#7b68ee"),C.set("mediumspringgreen",[0,250,154,157,1,.49,1],"#00fa9a"),C.set("mediumturquoise",[72,209,204,178,.6,.55,1],"#48d1cc"),C.set("mediumvioletred",[199,21,133,322,.81,.43,1],"#c71585"),C.set("midnightblue",[25,25,112,240,.64,.27,1],"#191970"),C.set("mintcream",[245,255,250,150,1,.98,1],"#f5fffa"),C.set("mistyrose",[255,228,225,6,1,.94,1],"#ffe4e1"),C.set("moccasin",[255,228,181,38,1,.85,1],"#ffe4b5"),C.set("navajowhite",[255,222,173,36,1,.84,1],"#ffdead"),C.set("navy",[0,0,128,240,1,.25,1],"#000080"),C.set("oldlace",[253,245,230,39,.85,.95,1],"#fdf5e6"),C.set("olive",[128,128,0,60,1,.25,1],"#808000"),C.set("olivedrab",[107,142,35,80,.6,.35,1],"#6b8e23"),C.set("orange",[255,165,0,39,1,.5,1],"#ffa500"),C.set("orangered",[255,69,0,16,1,.5,1],"#ff4500"),C.set("orchid",[218,112,214,302,.59,.65,1],"#da70d6"),C.set("palegoldenrod",[238,232,170,55,.67,.8,1],"#eee8aa"),C.set("palegreen",[152,251,152,120,.93,.79,1],"#98fb98"),C.set("paleturquoise",[175,238,238,180,.65,.81,1],"#afeeee"),C.set("palevioletred",[219,112,147,340,.6,.65,1],"#db7093"),C.set("papayawhip",[255,239,213,37,1,.92,1],"#ffefd5"),C.set("peachpuff",[255,218,185,28,1,.86,1],"#ffdab9"),C.set("peru",[205,133,63,30,.59,.53,1],"#cd853f"),C.set("pink",[255,192,203,350,1,.88,1],"#ffc0cb"),C.set("plum",[221,160,221,300,.47,.75,1],"#dda0dd"),C.set("powderblue",[176,224,230,187,.52,.8,1],"#b0e0e6"),C.set("purple",[128,0,128,300,1,.25,1],"#800080"),C.set("rebeccapurple",[102,51,153,270,.5,.4,1],"#663399","#639"),C.set("red",[255,0,0,0,1,.5,1],"#ff0000","#f00"),C.set("rosybrown",[188,143,143,0,.25,.65,1],"#bc8f8f"),C.set("royalblue",[65,105,225,225,.73,.57,1],"#4169e1"),C.set("saddlebrown",[139,69,19,25,.76,.31,1],"#8b4513"),C.set("salmon",[250,128,114,6,.93,.71,1],"#fa8072"),C.set("sandybrown",[244,164,96,28,.87,.67,1],"#f4a460"),C.set("seagreen",[46,139,87,146,.5,.36,1],"#2e8b57"),C.set("seashell",[255,245,238,25,1,.97,1],"#fff5ee"),C.set("sienna",[160,82,45,19,.56,.4,1],"#a0522d"),C.set("silver",[192,192,192,0,0,.75,1],"#c0c0c0"),C.set("skyblue",[135,206,235,197,.71,.73,1],"#87ceeb"),C.set("slateblue",[106,90,205,248,.53,.58,1],"#6a5acd"),C.set("slategray",[112,128,144,210,.13,.5,1],"#708090","slategrey"),C.set("snow",[255,250,250,0,1,.99,1],"#fffafa"),C.set("springgreen",[0,255,127,150,1,.5,1],"#00ff7f"),C.set("steelblue",[70,130,180,207,.44,.49,1],"#4682b4"),C.set("tan",[210,180,140,34,.44,.69,1],"#d2b48c"),C.set("teal",[0,128,128,180,1,.25,1],"#008080"),C.set("thistle",[216,191,216,300,.24,.8,1],"#d8bfd8"),C.set("tomato",[255,99,71,9,1,.64,1],"#ff6347"),C.set("turquoise",[64,224,208,174,.72,.56,1],"#40e0d0"),C.set("violet",[238,130,238,300,.76,.72,1],"#ee82ee"),C.set("wheat",[245,222,179,39,.77,.83,1],"#f5deb3"),C.set("white",[255,255,255,0,0,1,1],"#ffffff","#fff"),C.set("whitesmoke",[245,245,245,0,0,.96,1],"#f5f5f5"),C.set("yellow",[255,255,0,60,1,.5,1],"#ffff00","#ff0"),C.set("yellowgreen",[154,205,50,80,.61,.5,1],"#9acd32"),C.set("transparent",[0,0,0,0,0,0,0]);const A=/^#([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})([0-9a-f]{2})?$/i,F=/^#([0-9a-f])([0-9a-f])([0-9a-f])([0-9a-f])?$/i;function O(e){return parseInt(1===e.length?e.repeat(2):e.substring(0,2),16)}function R(e){return(e=o.clamp(+e)).toString(16).padStart(2,"0")}function q(e){if("string"!=typeof e)return[];const t=p(e,e.length>5?A:F);if(!t.length)return t;const s=t.map(O);return s[3]=void 0!==s[3]?o.getFraction(s[3],4):1,u(s)}const D=/^rgba?\(\s*([^\s,]+)\s*,\s*([^\s,]+)\s*,\s*([^\s,]+)\s*(?:,\s*([^\s,]+)\s*)?\)$/i,z=/^rgba?\(\s*(\S+)\s+(\S+)\s+(\S+)\s*(?:\s+\/\s+(\S+)\s*)?\)$/i;function H(e){if("string"!=typeof e)return[];const t=e.includes(",")?D:z;return b(p(e,t))}const j=/^hsla?\(\s*([^\s,]+)\s*,\s*([^\s,]+)\s*,\s*([^\s,]+)\s*(?:,\s*([^\s,]+)\s*)?\)$/i,G=/^hsla?\(\s*(\S+)\s+(\S+)\s+(\S+)\s*(?:\s+\/\s+(\S+)\s*)?\)$/i;function P(e){if("string"!=typeof e)return[];const t=e.includes(",")?j:G;return y(p(e,t))}class Color{constructor(e){const t=function(e){if(null==e)return[];let t=[];const s=[P,H,q,S,w,b];for(;s.length&&!t.length;)t=s.pop()(e);return t}(e);if(!t.length)throw Error("Cannot recognize color");Object.defineProperties(this,{red:{value:t[0]},green:{value:t[1]},blue:{value:t[2]},hue:{value:t[3]},saturation:{value:t[4]},lightness:{value:t[5]},alpha:{value:t[6]}})}get luminance(){return this.toXYZ()[1]}get mode(){return+(this.luminance<.25)}get hueGroup(){return s(Math.floor((this.hue+15)%360/30)+1,11)}get hueGroupOffset(){return s(this.hue%30+15,30)}get name(){const e=function(e){if("string"==typeof e)return C.getPrimaryKey(e.trim().toLowerCase())}(this.toHexString().substring(0,7));return 1===this.alpha?e:e+"*"}toRgbString(){return this.alpha<1?`rgba(${this.red}, ${this.green}, ${this.blue}, ${this.alpha})`:`rgb(${this.red}, ${this.green}, ${this.blue})`}toHexString(){return`#${R(this.red)}${R(this.green)}${R(this.blue)}${this.alpha<1?R(Math.round(255*this.alpha)):""}`}toHslString(){return this.alpha<1?`hsla(${this.hue}, ${r(100*this.saturation,0)}%, ${r(100*this.lightness,0)}%, ${this.alpha})`:`hsl(${this.hue}, ${r(100*this.saturation,0)}%, ${r(100*this.lightness,0)}%)`}contrast(e){if(!e)return 1;const t=this.mix(e),s=Math.min(this.luminance,t.luminance);return r((Math.max(this.luminance,t.luminance)+.05)/(s+.05),2)}mix(e,t=1){if(!e)return this;const s=e instanceof Color?e:new Color(e);if(1===s.alpha&&1===t)return s;const r=h.clamp(s.alpha*t),i=this.red+r*(s.red-this.red),n=this.green+r*(s.green-this.green),a=this.blue+r*(s.blue-this.blue);return new Color([i,n,a])}opacity(e=1){return new Color({...this,alpha:e})}findByContrast(e,s,i){let n,a,o=0,l=1,h=0;for(;h<=7;){if(n=new Color({hue:s,saturation:i,lightness:r((l+o)/2,2)}),a=this.contrast(n),t(a,e,.05))return n;a>e&&n.luminance>this.luminance||a<e&&n.luminance<this.luminance?l=(l+o)/2:o=(l+o)/2,h+=1}return n}tone(){return.5===this.lightness?this:new Color({hue:this.hue,saturation:this.saturation,lightness:.5})}invert(){return new Color([255-this.red,255-this.green,255-this.blue,this.alpha])}shiftHue(e=1){return 0===s(e,360)?this:new Color({hue:this.hue+e,saturation:this.saturation,lightness:this.lightness,alpha:this.alpha})}opposite(){return this.shiftHue(180)}offsetHue(e){return this.hueGroupOffset===e?this:new Color({hue:s(30*this.hueGroup-45+this.hueGroupOffset,360),saturation:this.saturation,lightness:this.lightness,alpha:this.alpha})}warmer(e=.1,t=[247,166,115]){return this.mix(t,e/2)}cooler(e=.1,t=[67,162,237]){return this.mix(t,e/2)}grayscale(){if(0===this.saturation)return this;const e=this.luminance>.0393?255*(this.luminance**(1/2.4)*1.055-.055):3294.6*this.luminance;return new Color([e,e,e,this.alpha])}toXYZ(){const e=[[.4125,.3576,.1804],[.2127,.7152,.0722],[.0193,.1192,.9503]];return[this.red,this.green,this.blue].map(e=>{const t=e/255;return t<=.03928?t/12.92:((t+.055)/1.055)**2.4}).map((t,s,i)=>r(i.reduce((t,r,i)=>t+r*e[s][i]),4))}}module.exports=Color;
