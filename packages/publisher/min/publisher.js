'use strict';(function(){var f=(()=>{function c(a){return!this.done&&Object.prototype.hasOwnProperty.call(this.subject,a)&&"function"===typeof this.subject[a]}const b=new WeakMap;class e{constructor(a){Object.defineProperties(this,{subject:{value:a}});b.set(this,!1)}get done(){return b.get(this)}next(a,d){if(c.call(this,a))this.subject[a](d)}complete(){b.set(this,!0)}delete(a){c.call(this,a)&&delete this.subject[a]}}return e})();class g{constructor(c,b){Object.defineProperties(this,{id:{value:c},
publisher:{value:b}})}unsubscribe(c){this.publisher.unsubscribe(this.id,c)}}var h=g;return(()=>{const c=new WeakMap,b=new WeakMap;class e{constructor(){c.set(this,1);b.set(this,new Map)}subscribe(a){a=new f(a);const d=c.get(this);c.set(this,d+1);b.get(this).set(d,a);return new h(d,this)}unsubscribe(a,d){const c=b.get(this);if(c.has(a)){const b=c.get(a);d&&"function"===typeof b.delete&&b.delete(d);d&&Object.keys(b.subject).length||("function"===typeof b.complete&&b.complete(),c.delete(a))}}setState(a,
c){[...b.get(this)].forEach(([,b])=>{b.next(a,c)});this[a]=c;return this}}return e})()})()
